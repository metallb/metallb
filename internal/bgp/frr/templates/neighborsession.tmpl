{{- define "neighborsession"}}
  neighbor {{.neighbor.Addr}} remote-as {{.neighbor.ASN}}
  {{- if .neighbor.EBGPMultiHop }}
  neighbor {{.neighbor.Addr}} ebgp-multihop
  {{- end }}
  {{ if .neighbor.Port -}}
  neighbor {{.neighbor.Addr}} port {{.neighbor.Port}}
  {{- end }}
  neighbor {{.neighbor.Addr}} timers {{.neighbor.KeepaliveTime}} {{.neighbor.HoldTime}}
  {{ if .neighbor.Password -}}
  neighbor {{.neighbor.Addr}} password {{.neighbor.Password}}
  {{- end }}
  {{ if .neighbor.SrcAddr -}}
  neighbor {{.neighbor.Addr}} update-source {{.neighbor.SrcAddr}}
  {{- end }}
{{- if ne .neighbor.BFDProfile ""}}
  neighbor {{.neighbor.Addr}} bfd profile {{.neighbor.BFDProfile}}
{{- end }}
{{- if  mustDisableConnectedCheck .neighbor.IPFamily .routerASN .neighbor.ASN .neighbor.EBGPMultiHop }}
  neighbor {{.neighbor.Addr}} disable-connected-check
{{- end }}
{{- end -}}